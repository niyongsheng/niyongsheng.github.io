(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cc860a0"],{"075e":function(t,e,a){t.exports=a.p+"img/go.b819b1a3.png"},"0abd":function(t,e,a){t.exports=a.p+"img/bean_one.84279a9a.png"},"1d17":function(t,e,a){},"2c26":function(t,e,a){"use strict";a.r(e);var i,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.$t("luckCard.header.title"),"sub-title":t.$t("luckCard.header.subtitle")},on:{back:function(){return t.$router.go(-1)}}},[i("template",{slot:"extra"},[i("a-button",{key:"3",attrs:{icon:"sync"},on:{click:t.handleRandomItem}},[t._v(" "+t._s(t.$t("luckCard.header.rr"))+" ")]),i("a-button",{key:"2",attrs:{icon:"minus-circle"},on:{click:t.handleClearCache}},[t._v(" "+t._s(t.$t("luckCard.header.cc"))+" ")]),i("a-button",{key:"1",attrs:{icon:"setting",type:"primary"},on:{click:t.showDrawer}},[t._v(" "+t._s(t.$t("luckCard.header.st"))+" ")])],1)],2),i("a-drawer",{attrs:{title:t.$t("luckCard.listTitle"),placement:"right",closable:!1,visible:t.visible,width:"50%"},on:{close:t.onClose}},[i("item-list",{attrs:{"data-source":t.dataSource}})],1),i("a-empty",{directives:[{name:"show",rawName:"v-show",value:t.showEmpty,expression:"showEmpty"}]}),i("div",{attrs:{id:"wheel",hidden:t.showWheel}},[i("div",{staticClass:"big-wheel-box"},[i("wheel",{ref:"childWheel",attrs:{width:"35rem",height:"35rem",prizeList:t.dataSource},on:{over:t.openNotification},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[i("div",{staticClass:"prize-name"},[t._v(t._s(r.name))]),i("img",{staticClass:"prize-img",attrs:{src:r.url?r.url:a("0abd")}})]}}])}),i("img",{staticClass:"btn-go",attrs:{src:a("075e")},on:{click:t.go}})],1)])],1)},n=[],s=(a("b0c0"),a("5530")),o=a("ade3"),c=(a("9e39"),a("f933")),l=(a("805a"),a("0c63")),h=(a("a71a"),a("b558")),u=(a("153b"),a("9571")),d=(a("e1f5"),a("5efb")),f=(a("c0ed"),a("9fd0")),p=(a("dcac"),a("fc25")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"bigWheel",staticClass:"__big-wheel",style:{width:t.width,height:t.height}},[a("div",{staticClass:"wrap",style:{transform:t.rotateAngle,transition:t.rotateTransition}},[a("canvas",{ref:"canvas",attrs:{id:"canvas"}},[t._v("浏览器版本过低")]),a("div",{staticClass:"prize-wrap"},t._l(t.prizeList,(function(e,i){return a("div",{key:i,staticClass:"item",style:t._calcRotateAngle(i)},[t._t("item",null,{item:e})],2)})),0)])])},g=[],b=(a("cb29"),a("a9e3"),{name:"Wheel",props:{prizeList:{type:Array,required:!0},width:{required:!0},height:{required:!0},prizeBgColors:{type:Array,default:function(){return["#F52D4B","#FEE9ED"]}},borderColor:{type:String,default:"#F23544"},turnsNumber:{type:Number,default:5},turnsTime:{type:Number,default:5}},data:function(){return{startRotateDegree:0,rotateAngle:"rotate(30deg)",rotateTransition:""}},methods:{initData:function(){var t=this.prizeList.length,e=this.prizeBgColors,a=this.borderColor,i=this.$refs.canvas,r=i.getContext("2d"),n=this.$refs.canvas.width=this.$refs.bigWheel.clientWidth,s=this.$refs.canvas.height=this.$refs.bigWheel.clientHeight;r.translate(0,s),r.rotate(-90*Math.PI/180);var o=n/2-1,c=0,l=2*Math.PI/t;r.clearRect(0,0,n,s),r.strokeStyle=a;for(var h=-1,u=0;u<t;u++){var d=u*l;h++,r.fillStyle=e[h],h===e.length-1&&(h=-1),r.beginPath(),r.arc(.5*n,.5*s,o,d,d+l,!1),r.arc(.5*n,.5*s,c,d+l,d,!0),r.stroke(),r.fill(),r.save()}},rotate:function(t){var e=this,a=this.turnsTime,i=this.startRotateDegree+360*this.turnsNumber+360-(180/this.prizeList.length+360/this.prizeList.length*t)-this.startRotateDegree%360;this.startRotateDegree=i,this.rotateAngle="rotate(".concat(i,"deg)"),this.rotateTransition="transform ".concat(a,"s cubic-bezier(0.250, 0.460, 0.455, 0.995)"),setTimeout((function(){e.$emit("over",e.prizeList[t])}),1e3*a+500)},_calcRotateAngle:function(t){var e=360/this.prizeList.length*t+180/this.prizeList.length;return{transform:"rotate(".concat(e,"deg)")}}},mounted:function(){this.initData()}}),v=b,w=(a("313c"),a("2877")),y=Object(w["a"])(v,m,g,!1,null,"0a0402c2",null),C=y.exports,_=C,I=a("e82f"),k=a("2f62"),N=Object(k["a"])("luckCardModule"),E=N.mapMutations,$={name:"LuckWheel",components:(i={ItemList:I["a"],Wheel:_},Object(o["a"])(i,p["a"].name,p["a"]),Object(o["a"])(i,f["a"].name,f["a"]),Object(o["a"])(i,d["a"].name,d["a"]),Object(o["a"])(i,u["a"].name,u["a"]),Object(o["a"])(i,h["a"].name,h["a"]),Object(o["a"])(i,l["a"].name,l["a"]),Object(o["a"])(i,c["a"].name,c["a"]),i),data:function(){return{visible:!1,showEmpty:!1,showWheel:!1,valve:!1}},methods:Object(s["a"])({go:function(){if(!this.valve){this.valve=!0;var t=Math.floor(Math.random()*this.dataSource.length);this.winningIndex=t,this.$refs.childWheel.rotate(t)}},openNotification:function(t){var e=this.$createElement;this.$notification.config({placement:"topLeft",top:"120px"}),this.$notification.open({duration:null,message:t.name,description:t.subtitle,icon:e("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})})},showDrawer:function(){this.visible=!0},onClose:function(){this.visible=!1},handleRandomItem:function(){this.randomItem()},handleClearCache:function(){}},E(["randomItem"])),computed:{dataSource:function(){return this.$store.getters["luckCardModule/getDataSource"]}},watch:{dataSource:{deep:!0,immediate:!0,handler:function(t){0===t.length?(this.showEmpty=!0,this.showWheel=!0):(this.showEmpty=!1,this.showWheel=!1,this.$refs.childWheel.initData())}}},beforeDestroy:function(){this.$notification.destroy()}},A=$,x=(a("385f"),Object(w["a"])(A,r,n,!1,null,null,null));e["default"]=x.exports},"313c":function(t,e,a){"use strict";a("1d17")},"385f":function(t,e,a){"use strict";a("b06d")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var i=a("1d80"),r=a("5899"),n="["+r+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var i=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var n,s;return r&&"function"==typeof(n=e.constructor)&&n!==a&&i(s=n.prototype)&&s!==a.prototype&&r(t,s),t}},"81d5":function(t,e,a){"use strict";var i=a("7b0b"),r=a("23cb"),n=a("50c4");t.exports=function(t){var e=i(this),a=n(e.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,a),c=s>2?arguments[2]:void 0,l=void 0===c?a:r(c,a);while(l>o)e[o++]=t;return e}},a9e3:function(t,e,a){"use strict";var i=a("83ab"),r=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),c=a("c6b6"),l=a("7156"),h=a("c04e"),u=a("d039"),d=a("7c73"),f=a("241c").f,p=a("06cf").f,m=a("9bf2").f,g=a("58a8").trim,b="Number",v=r[b],w=v.prototype,y=c(d(w))==b,C=function(t){var e,a,i,r,n,s,o,c,l=h(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(n=l.slice(2),s=n.length,o=0;o<s;o++)if(c=n.charCodeAt(o),c<48||c>r)return NaN;return parseInt(n,i)}return+l};if(n(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var _,I=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof I&&(y?u((function(){w.valueOf.call(a)})):c(a)!=b)?l(new v(C(e)),a,I):C(e)},k=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;k.length>N;N++)o(v,_=k[N])&&!o(I,_)&&m(I,_,p(v,_));I.prototype=w,w.constructor=I,s(r,b,I)}},b06d:function(t,e,a){},cb29:function(t,e,a){var i=a("23e7"),r=a("81d5"),n=a("44d2");i({target:"Array",proto:!0},{fill:r}),n("fill")}}]);
//# sourceMappingURL=chunk-7cc860a0.2db0bb7d.js.map